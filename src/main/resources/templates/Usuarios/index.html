
<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/_mainLayout}">

<div layout:fragment="content">

    <div class="container mt-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2>Lista de Usuarios</h2>
            <a class="btn btn-primary" th:href="@{/usuarios/nuevo}">Crear nuevo usuario</a>
        </div>

        <!-- Filtro de roles -->
        <form method="get" th:action="@{/usuarios}" class="mb-3">
            <div class="row g-2 align-items-center">
                <div class="col-auto">
                    <label for="rolSelect" class="form-label mb-0">Filtrar por rol:</label>
                </div>
                <div class="col-auto">
                    <select class="form-select" id="rolSelect" name="rol">
                        <option value="">-- Todos --</option>
                        <option th:each="rol : ${roles}"
                                th:value="${rol.nombrerol}"
                                th:text="${rol.nombrerol}"
                                th:selected="${rol.nombrerol == rolSeleccionado}">
                        </option>
                    </select>
                </div>
                <div class="col-auto">
                    <button type="submit" class="btn btn-secondary">Filtrar</button>
                </div>
            </div>
        </form>

        <!-- Tabla de usuarios -->
        <div class="table-responsive">
            <table class="table table-bordered table-striped">
                <thead class="thead-dark">
                <tr>
                    <th>Nombre</th>
                    <th>Correo</th>
                    <th>Tel√©fono</th>
                    <th>Rol</th>
                    <th>Acciones</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="usuario : ${usuarios}">
                    <td th:text="${usuario.nombre}"></td>
                    <td th:text="${usuario.correo}"></td>
                    <td th:text="${usuario.telefono}"></td>
                    <td th:text="${usuario.role.nombrerol}"></td>
                    <td>
                        <a class="btn btn-sm btn-warning"
                           th:href="@{/usuarios/editar/{id}(id=${usuario.id})}">
                            ‚úèÔ∏è
                        </a>
                        <form th:action="@{'/usuarios/eliminar/' + ${usuario.id}}"
                              method="post"
                              style="display:inline;"
                              onsubmit="return confirm('¬øEst√°s seguro que deseas eliminar este usuario?');">
                            <button type="submit" class="btn btn-danger">üóëÔ∏è</button>
                        </form>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

</div>
</html>



